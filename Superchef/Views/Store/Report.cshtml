@section head {
    <style>
        .sales-container {
            position: relative;
        }

        .sales-container .title {
            text-align: center;
            margin-bottom: 1rem;
        }

        .sales-container table {
            width: 100%;
            border-collapse: collapse;
            border-spacing: 0;
            background-color: var(--bg-manage-table);
            border: 1px solid var(--border-primary);
            overflow-x: auto;
        }

        .sales-container th,
        .sales-container td {
            padding: 0.75rem 1rem;
            text-align: left;
            white-space: nowrap;
        }

        .sales-container tr th:first-child {
            position: sticky;
            left: 0;
            white-space: normal;
            overflow-wrap: break-word;
            width: clamp(12rem, 30vw, 20rem);
            min-width: min(30vw, 10rem);
        }

        .sales-container th {
            background-color: var(--bg-manage-table-th);
            color: var(--text-inverse);
            font-weight: normal;
            padding-right: 1.2rem;
        }

        .sales-container tr td {
            border-bottom: 1px solid var(--border-primary);
            white-space: nowrap;
        }

        .sales-container tr:last-child td {
            border-bottom: none;
        }

        .sales-container:has(input[type="radio"][value="annually"]:checked) .quarterly-table {
            display: none;
        }

        .sales-container:has(input[type="radio"][value="quarterly"]:checked) .annually-table {
            display: none;
        }

        .sales-container button {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            padding: 0;
            background-color: transparent;
            width: 1.5rem;
            height: 1.5rem;
            background-image: url("/img/download.png");
            background-size: 100%;
            background-repeat: no-repeat;
            background-position: center;
        }

        .sales-container button:hover {
            filter: brightness(3);
        }

        @@media (max-width: 400px) {
            .sales-container .form-group {
                width: 100%;
            }

            .sales-container .form-input {
                display: flex;
                flex-direction: column;
            }
        }
    </style>
}

<div class="container sales-container" data-flex="column center">
    <div class="title">Daily Sales Summary</div>

    <div class="form-group">
        <div class="form-input">
            <input type="date">
        </div>
    </div>

    <div class="container" data-no="padding color margin" data-overflow>
        <table class="annually-table">
            <caption><button></button></caption>
            <tbody>
                <tr>
                    <th>Total Orders</th>
                    <td>100</td>
                </tr>
                <tr>
                    <th>Total Revenue</th>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>Total Items Sold</th>
                    <td>100</td>
                </tr>
                <tr>
                    <th>Peak Pickup Slot</th>
                    <td>12:00 PM - 12:30 PM</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="container sales-container" data-flex="column center">
    <div class="title">Sales Report</div>

    <div class="form-group">
        <div class="custom-tick-container center-items">
            <label>
                <input type="radio" name="sales_report" value="annually" checked>
                <div class="text">Anually</div>
            </label>
            <label>
                <input type="radio" name="sales_report" value="quarterly">
                <div class="text">Quarterly</div>
            </label>
        </div>
    </div>

    <div class="form-group">
        <div class="form-input">
            <input type="date">
            <span>to</span>
            <input type="date">
        </div>
    </div>

    <div class="container" data-no="color padding" data-overflow>
        <table class="annually-table">
            <caption><button></button></caption>
            <thead>
                <tr>
                    <th></th>
                    <th>2025</th>
                    <th>2024</th>
                    <th>2023</th>
                    <th>2022</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Total Revenue</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>Revenue Growth</th>
                    <td>100%</td>
                    <td>100%</td>
                    <td>100%</td>
                    <td>100%</td>
                </tr>
                <tr>
                    <th>Total Orders</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>Average Order Value</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
            </tbody>
        </table>

        <table class="quarterly-table">
            <caption><button></button></caption>
            <thead>
                <tr>
                    <th></th>
                    <th>2025 (Q4)</th>
                    <th>2025 (Q3)</th>
                    <th>2025 (Q2)</th>
                    <th>2025 (Q1)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Total Revenue</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>Revenue Growth</th>
                    <td>100%</td>
                    <td>100%</td>
                    <td>100%</td>
                    <td>100%</td>
                </tr>
                <tr>
                    <th>Total Orders</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>Average Order Value</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="container sales-container" data-flex="column center">
    <div class="title">Sales By Items</div>

    <div class="form-group">
        <div class="custom-tick-container center-items">
            <label>
                <input type="radio" name="sales_items" value="annually" checked>
                <div class="text">Anually</div>
            </label>
            <label>
                <input type="radio" name="sales_items" value="quarterly">
                <div class="text">Quarterly</div>
            </label>
        </div>
    </div>

    <div class="form-group">
        <div class="form-input">
            <input type="date">
            <span>to</span>
            <input type="date">
        </div>
    </div>

    <div class="container" data-no="padding color" data-overflow>
        <table class="annually-table">
            <caption><button></button></caption>
            <thead>
                <tr>
                    <th></th>
                    <th>2025</th>
                    <th>2024</th>
                    <th>2023</th>
                    <th>2022</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>38 - Burger</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>ID - Name</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>39 - Maggie Curry</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>100 - Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nobis, sunt.</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
            </tbody>
        </table>

        <table class="quarterly-table">
            <caption><button></button></caption>
            <thead>
                <tr>
                    <th></th>
                    <th>2025 (Q4)</th>
                    <th>2025 (Q3)</th>
                    <th>2025 (Q2)</th>
                    <th>2025 (Q1)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>38 - Burger</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>ID - Name</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>39 - Maggie Curry</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
                <tr>
                    <th>100 - Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nobis, sunt.</th>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                    <td>RM 100.00</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

@section foot {
    <script>
        $(document).on("click", ".sales-container button", tableToCSV)

        function tableToCSV() {
            const $table = $(this).closest("table")

            let csv_data = [];
            let rows = $table.find("tr");

            rows.each(function (i, row) {
                const cols = $(row).find("td,th");
                const csvrow = [];

                cols.each(function (j, col) {
                    let text = col.innerText;
                    text = text.replace(/"/g, '""');
                    csvrow.push(`"${text}"`);
                })

                csv_data.push(csvrow.join(","));
            })

            const title = $(this).closest(".sales-container").find(".title").text()

            downloadCSVFile(csv_data.join("\n"), `${title}_${Date.now()}`)
        }

        function downloadCSVFile(csv_data, name = "Unknown") {

            // Create CSV file object and feed
            // our csv_data into it
            CSVFile = new Blob([csv_data], {
                type: "text/csv"
            });

            // Create to temporary link to initiate
            // download process
            let temp_link = document.createElement('a');

            // Download csv file
            temp_link.download = `${name}.csv`;
            let url = window.URL.createObjectURL(CSVFile);
            temp_link.href = url;

            // This link should not be displayed
            temp_link.style.display = "none";
            document.body.appendChild(temp_link);

            // Automatically click the link to
            // trigger download
            temp_link.click();
            document.body.removeChild(temp_link);
        }
    </script>
}